@using Quarter.Components.Navigation
@using Quarter.State

<div class="qa-page-header">
    <PageNavigation />
</div>

<div class="qa-page-area">
    <div class="qa-page-content @(ColumnMode ? "qa-page-content--columns" : "")" test="page-content">
        @PageContent
    </div>
</div>

@foreach (var (type, dictionary) in Modals())
{
    <DynamicComponent Type="type" Parameters="dictionary" />
}

<Icons />

@inherits Quarter.Core.UI.Components.QuarterComponent<Quarter.State.ApplicationState>

@code {
    #nullable enable

    [Parameter]
    public RenderFragment? PageContent { get; set; }

    [Parameter]
    public bool ColumnMode { get; set; }

    private IList<ModalState> Modals()
    {
        if (State?.Modals is not null)
            return State.Modals.ToList();
        return Array.Empty<ModalState>();
    }
}